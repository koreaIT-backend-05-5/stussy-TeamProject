<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.project.stussy.domain.cart.CartRepository">
		<insert id="saveCart" parameterType="com.project.stussy.domain.cart.Cart">
  			insert into
  				cart_mst
  			values(
  					0,
  			#{user_code},
  			#{product_code},
			#{bag_product_size},
			1,
			now(),
			now()
  			)
  		</insert>
  		
 		<select id="getCart" parameterType="HashMap" resultType="com.project.stussy.domain.cart.Cart">
		    SELECT 
		   	  cart_code
		    FROM
		      cart_mst
		    where
		    	user_code = #{user_code}
		    	and bag_product_size = #{bag_product_size}
		    	and product_code = #{product_code};
		</select>
  		

		<select id="getCartList" parameterType="Integer" resultType="com.project.stussy.domain.cart.Cart">
		    SELECT 
		      cm.cart_code,
		      cm.bag_amount,
		      cm.bag_product_size,
		      
		      pm.product_price,
		      pm.product_name,
		      
		      pf.file_name
		    FROM
		      cart_mst cm
		      left outer join product_mst pm on(pm.product_code = cm.product_code)
		      left outer join product_file pf on(pf.product_code = cm.product_code)
		    where
		    	cm.user_code = #{user_code};
		    
		</select>
		
		<update id="updateAmount" parameterType="Integer">
			update
				cart_mst
			set
				bag_amount = #{amount}
			where
				cart_code = #{cart_code};			
		</update>
		
		<delete id="deleteCart"  parameterType="Integer">
			delete
			from
				cart_mst
			where
				cart_code = #{cart_code};
		</delete>
</mapper>