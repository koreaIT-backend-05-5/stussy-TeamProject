<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.project.stussy.domain.cart.CartRepository">
	<insert id="addCartProduct" parameterType="com.project.stussy.domain.cart.Cart">
		insert into 
			cart_mst
		values(
			0,
		#{user_code},
		#{product_code},
		#{file_name},
		#{product_name},
		#{product_price},
		#{cart_count},
		#{cart_total_price},
		now(),
		now()
		)
	</insert>
	
	<select id="checkCart" resultType="com.project.stussy.domain.cart.Cart"> 
		select
			*
		from 
		    cart_mst
		where 
			product_code = #{product_code}
	</select>

	<select id="getCartList" parameterType="hashmap" resultType="com.project.stussy.domain.cart.Cart">
	    select
	    	cm.product_code,
	    	pf.file_name,
	    	cm.product_name,
	    	cm.product_price,
	    	cm.cart_count, 
	    	cm.cart_total_price
	    from
	    	cart_mst cm
	    	left outer join product_file pf on(cm.product_code = pf.product_code)
	    order by
	    	product_code desc
	    limit #{index}, 5; 
	</select>
	
	<!-- 관리자페이지 회원정보 삭제 -->
	<delete id="remove" parameterType="Integer">
	  delete
	  from
	    cart_mst
	  where
	    product_code = #{product_code}
	</delete>
</mapper>