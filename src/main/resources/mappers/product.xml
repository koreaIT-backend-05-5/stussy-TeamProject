<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.project.stussy.domain.product.ProductRepository">
  		<insert id="saveProduct" parameterType="com.project.stussy.domain.product.Product"
  			useGeneratedKeys="true" keyProperty="product_code">
  			insert into
  				product_mst
  			values(
  					0,
  			#{product_category},
			#{product_name},
			#{product_price},
			#{product_explanation},
			#{product_size},
			now(),
			now()
  			)
  		</insert>
  		
  		<insert id="saveProductFiles" parameterType="java.util.List">
  			insert into
  				product_file
  			values
  				<foreach collection="list" item="file" separator=",">
  					(
  						0,
  						#{file.product_code},
  						#{file.file_name},
  						now(),
  						now()
  					)
  				</foreach>
  		</insert>
  		
  		<select id="getProductList" parameterType="hashmap" resultType="com.project.stussy.domain.product.Product">
  				SELECT
					pm.product_code,
					pf.file_name,
					pm.product_category,
					pm.product_name,
					pm.product_price,
					pm.product_explanation
				
				FROM
					product_mst pm
					LEFT OUTER JOIN product_file pf ON(pf.product_code = pm.product_code)
			order by
				product_code asc
			limit #{index}, 10;		
  		</select>
  		
  		
  </mapper>